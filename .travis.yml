env:
  matrix:
    - NETBSD_VERSION=6.0
    - NETBSD_VERSION=6.0.6
    - NETBSD_VERSION=6.1
    - NETBSD_VERSION=6.1.5
    - NETBSD_VERSION=7.0
    - NETBSD_VERSION=7.1.2
    - NETBSD_VERSION=8.0

sudo: required

language: perl

perl:
  - "5.22"

services:
  - docker

before_install:
  - source <(curl https://raw.githubusercontent.com/madworx/cd-ci-glue/master/src/cd-ci-glue.bash)

script:
  - make build

jobs:
  include:
    - stage: Update DockerHub description
      env: NETBSD_VERSION
      script:
        - is_travis_master_push &&
          dockerhub_set_description madworx/netbsd README.md

after_success:
  - is_travis_master_push &&
    dockerhub_push_image madworx/netbsd:${NETBSD_VERSION}-x86_64 &&
